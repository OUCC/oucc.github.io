---
import type { HTMLAttributes } from 'astro/types'

type Props = (
  | ({ element: 'a' } & Omit<HTMLAttributes<'a'>, 'slot'>)
  | ({ element?: 'button' } & Omit<HTMLAttributes<'button'>, 'slot'>)
) & { variant: 'primary' | 'secondary' | 'discord' }

const {
  element: Element = 'button',
  variant = 'primary',
  ...attrs
} = Astro.props
---

<Element
  class:list={[
    'px-5 py-2.5 rounded-full font-bold',
    {
      'bg-primary text-white': variant === 'primary',
      'bg-white text-primary': variant === 'secondary',
      'bg-discord text-white': variant === 'discord',
      'drop-shadow-[0_4px_4px_#00000040] hover:drop-shadow-[0_4px_4px_#00000080]':
        variant === 'primary' || variant === 'discord',
      'drop-shadow-[0_4px_4px_#ffffff40] hover:drop-shadow-[0_4px_4px_#ffffff80]':
        variant === 'secondary',
    },
    'active:drop-shadow-none',
    'active:translate-y-1 transition-[filter,transform] ease-in-out',
    attrs.class,
  ]}
  {...attrs as typeof Element extends 'a'
    ? Omit<HTMLAttributes<'a'>, 'slot'>
    : Omit<HTMLAttributes<'button'>, 'slot'>}
>
  <slot />
</Element>
