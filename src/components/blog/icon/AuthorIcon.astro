---
import Icon from '@/components/common/Icon.astro'
import { unreachable } from '@/utils/unreachable'
import type { CollectionEntry } from 'astro:content'

interface Props {
  author: CollectionEntry<'authors'>
  size: number
}
const { author, size } = Astro.props

const image =
  author.data.image.type === 'svg' &&
  author.data.image.name === 'default_user' &&
  author.data.github
    ? ({
        type: 'external-url',
        url: `https://github.com/${author.data.github}.png`,
      } as const)
    : author.data.image
---

{
  image.type === 'svg' ? (
    <Icon
      name={image.name}
      alt={`${author.data.name} のアイコン`}
      class="aspect-square rounded-full"
      height={size}
      width={size}
      isBlog
    />
  ) : image.type === 'external-url' ? (
    <img
      src={image.url}
      height={size}
      width={size}
      class="aspect-square rounded-full"
    />
  ) : (
    unreachable(image)
  )
}
