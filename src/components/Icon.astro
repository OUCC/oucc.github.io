---
import { optimize } from 'svgo'

interface Props {
  // `src/assets/icons`にあるSVGのファイル名
  name: string

  // `aria-label`に指定するテキスト
  alt: string
}

const { name, alt } = Astro.props

const svgContent = (await import(`../assets/icons/${name}.svg?raw`)).default

const { data: optimizedSvgContent } = optimize(svgContent, {
  plugins: [
    {
      name: 'preset-default',
      params: {
        overrides: {
          convertPathData: false,
          removeViewBox: false,
        },
      },
    },
    'removeDimensions',
    {
      name: 'addAttributesToSVGElement',
      params: {
        attribute: {
          role: 'img',
          'aria-label': alt,
          style: 'max-width:100%;max-height:100%',
        },
      },
    },
  ],
})
---

<Fragment set:html={optimizedSvgContent} />
